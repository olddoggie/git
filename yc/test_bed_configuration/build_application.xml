<?xml version="1.0" encoding="UTF-8"?>

<!-- example of ant parament: application= affinity -->
<project basedir="." default="build" name="build_application">

	<import file="properties.xml" />

	<target name="initFunction">
		<delete dir="${modulePath}/bin" />
		<mkdir dir="${modulePath}/bin" />
		<copy includeemptydirs="false" todir="${modulePath}/bin">
			<fileset dir="${modulePath}/src">
				<exclude name="**/*.java" />
			</fileset>
		</copy>
	</target>
	<target name="init">
		<antcall target="initFunction">
			<param name="modulePath" value="${application.location}" />
		</antcall>
		<antcall target="initFunction">
			<param name="modulePath" value="${qacommon.location}" />
		</antcall>
		<antcall target="initFunction">
			<param name="modulePath" value="${qaframework.location}" />
		</antcall>
	</target>

	<target depends="init" name="build">
		<echo message="${ant.project.name}: ${ant.file}" />
		<javac debug="true" debuglevel="${debuglevel}" destdir="${qaframework.location}/bin" includeantruntime="false" source="${source}" target="${target}">
			<src path="${qaframework.location}/src" />
			<classpath refid="qaframework.classpath" />
		</javac>
		<javac debug="true" debuglevel="${debuglevel}" destdir="${qacommon.location}/bin" includeantruntime="false" source="${source}" target="${target}">
			<src path="${qacommon.location}/src" />
			<classpath refid="qacommon.classpath" />
		</javac>
		<javac debug="true" debuglevel="${debuglevel}" destdir="${application.location}/bin" includeantruntime="false" source="${source}" target="${target}">
			<src path="${application.location}/src" />
			<classpath refid="application.classpath" />
		</javac>
	</target>
</project>
